
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>{{ title }}</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <style>
                body { padding: 20px; }
                .chart-container { margin-bottom: 30px; }
                .table-responsive { margin-bottom: 30px; }
                .metric-card { margin-bottom: 20px; }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>{{ title }}</h1>
                <p class="text-muted">Generated on {{ run_date }}</p>

                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Backtest Summary</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h4>Trade Statistics</h4>
                                <table class="table">
                                    <tr>
                                        <td>Instrument:</td>
                                        <td>{{ instrument }}</td>
                                    </tr>
                                    <tr>
                                        <td>Period:</td>
                                        <td>{{ start_date }} to {{ end_date }}</td>
                                    </tr>
                                    <tr>
                                        <td>Total Trades:</td>
                                        <td>{{ summary.total_trades }}</td>
                                    </tr>
                                    <tr>
                                        <td>Win Rate:</td>
                                        <td>{{ "%.2f%%" | format(summary.win_rate * 100) }}</td>
                                    </tr>
                                    <tr>
                                        <td>Profit Factor:</td>
                                        <td>{{ "%.2f" | format(summary.profit_factor) }}</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h4>Performance</h4>
                                <table class="table">
                                    <tr>
                                        <td>Initial Balance:</td>
                                        <td>${{ "%.2f" | format(summary.initial_balance) }}</td>
                                    </tr>
                                    <tr>
                                        <td>Final Balance:</td>
                                        <td>${{ "%.2f" | format(summary.final_balance) }}</td>
                                    </tr>
                                    <tr>
                                        <td>Net Profit:</td>
                                        <td>${{ "%.2f" | format(summary.net_profit) }} ({{ "%.2f%%" | format(summary.percent_return) }})</td>
                                    </tr>
                                    <tr>
                                        <td>Max Drawdown:</td>
                                        <td>${{ "%.2f" | format(summary.max_drawdown) }} ({{ "%.2f%%" | format(summary.max_drawdown_pct) }})</td>
                                    </tr>
                                    <tr>
                                        <td>Average R-Multiple:</td>
                                        <td>{{ "%.2f" | format(summary.avg_r_multiple) }}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>Performance Charts</h3>
                <div class="row">
                    {% if chart_paths.equity_curve %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">Equity Curve</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.equity_curve }}" class="img-fluid" alt="Equity Curve">
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if chart_paths.cumulative_profit %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">Cumulative Profit</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.cumulative_profit }}" class="img-fluid" alt="Cumulative Profit">
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if chart_paths.daily_profit %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">Daily Profit</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.daily_profit }}" class="img-fluid" alt="Daily Profit">
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if chart_paths.dow_win_rate %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">Win Rate by Day of Week</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.dow_win_rate }}" class="img-fluid" alt="Win Rate by Day of Week">
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if chart_paths.pnl_distribution %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">P/L Distribution</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.pnl_distribution }}" class="img-fluid" alt="P/L Distribution">
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if chart_paths.r_distribution %}
                    <div class="col-md-6 chart-container">
                        <div class="card">
                            <div class="card-header">R-Multiple Distribution</div>
                            <div class="card-body">
                                <img src="{{ chart_paths.r_distribution }}" class="img-fluid" alt="R-Multiple Distribution">
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <h3>Trade Journal</h3>
                <div class="table-responsive">
                    {{ trades_table|safe }}
                </div>

                <h3>Daily Statistics</h3>
                <div class="table-responsive">
                    {{ daily_stats_table|safe }}
                </div>

                <footer class="my-5 pt-5 text-muted text-center text-small">
                    <p>Report generated by Silver Bullet Backtesting Engine</p>
                    <p>Execution time: {{ "%.2f" | format(execution_time) }} seconds</p>
                </footer>
            </div>
        </body>
        </html>
        